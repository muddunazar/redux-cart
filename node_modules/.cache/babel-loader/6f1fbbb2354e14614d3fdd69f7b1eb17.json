{"ast":null,"code":"import _regeneratorRuntime from\"D:/MAXI-PROJECTS/19-advanced-redux/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/MAXI-PROJECTS/19-advanced-redux/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{cartActions}from\"./cart-slice\";import{toggleActions}from\"./ui-slice\";export var sendCartData=function sendCartData(cart){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var sendRequest;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(toggleActions.showNotification({status:'pending',title:'Sending...',message:'Sending cart data...'}));sendRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://advanced-redux-card-data-default-rtdb.firebaseio.com/cart.json',{method:'PUT',// body: JSON.stringify(cart)\nbody:JSON.stringify({items:cart.items,totalQuantity:cart.totalQuantity})});case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error(\"Sending Cart data failed.\");case 5:case\"end\":return _context.stop();}}},_callee);}));return function sendRequest(){return _ref2.apply(this,arguments);};}();_context2.prev=2;_context2.next=5;return sendRequest();case 5:dispatch(toggleActions.showNotification({status:'success',title:'Success!',message:'Sent cart data Successfully!'}));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](2);dispatch(toggleActions.showNotification({status:'error',title:'Error!',message:'Sending cart data failed'}));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[2,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var fetchCartData=function fetchCartData(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var fetchdata,cartData;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetchdata=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('https://advanced-redux-card-data-default-rtdb.firebaseio.com/cart.json');case 2:response=_context3.sent;if(response.ok){_context3.next=5;break;}throw new Error('Could not fetch cart data!');case 5:_context3.next=7;return response.json();case 7:data=_context3.sent;return _context3.abrupt(\"return\",data);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchdata(){return _ref4.apply(this,arguments);};}();_context4.prev=1;_context4.next=4;return fetchdata();case 4:cartData=_context4.sent;// dispatch(cartActions.replaceCart(cartData))\ndispatch(cartActions.replaceCart({items:cartData.items||[],totalQuantity:cartData.totalQuantity}));_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);dispatch(toggleActions.showNotification({status:'error',title:'Error!',message:'Fetching cart data failed'}));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"names":["cartActions","toggleActions","sendCartData","cart","dispatch","showNotification","status","title","message","sendRequest","fetch","method","body","JSON","stringify","items","totalQuantity","response","ok","Error","fetchCartData","fetchdata","json","data","cartData","replaceCart"],"sources":["D:/MAXI-PROJECTS/19-advanced-redux/src/store/cart-actions.js"],"sourcesContent":["import { cartActions } from \"./cart-slice\"\r\nimport { toggleActions } from \"./ui-slice\"\r\n\r\nexport const sendCartData = (cart) => {\r\n\r\n    return async (dispatch) => {\r\n\r\n        dispatch(toggleActions.showNotification({\r\n            status: 'pending',\r\n            title: 'Sending...',\r\n            message: 'Sending cart data...'\r\n        }))\r\n        const sendRequest = async () => {\r\n\r\n            const response = await fetch('https://advanced-redux-card-data-default-rtdb.firebaseio.com/cart.json',\r\n                {\r\n                    method: 'PUT',\r\n                    // body: JSON.stringify(cart)\r\n                    body: JSON.stringify({\r\n                        items: cart.items,\r\n                        totalQuantity: cart.totalQuantity\r\n                    })\r\n\r\n                })\r\n            if (!response.ok) {\r\n                throw new Error(\"Sending Cart data failed.\")\r\n            }\r\n        }\r\n        try {\r\n            await sendRequest();\r\n            dispatch(toggleActions.showNotification({\r\n                status: 'success',\r\n                title: 'Success!',\r\n                message: 'Sent cart data Successfully!'\r\n            }))\r\n\r\n        } catch (error) {\r\n            dispatch(toggleActions.showNotification({\r\n                status: 'error',\r\n                title: 'Error!',\r\n                message: 'Sending cart data failed'\r\n            }))\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport const fetchCartData = () => {\r\n    return async (dispatch) => {\r\n        const fetchdata = async () => {\r\n            const response = await fetch('https://advanced-redux-card-data-default-rtdb.firebaseio.com/cart.json')\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Could not fetch cart data!')\r\n            }\r\n            const data = await response.json();\r\n\r\n            return data;\r\n        }\r\n        try {\r\n            const cartData = await fetchdata();\r\n            // dispatch(cartActions.replaceCart(cartData))\r\n            dispatch(cartActions.replaceCart({\r\n                items: cartData.items || [],\r\n                totalQuantity: cartData.totalQuantity,\r\n            }))\r\n\r\n        } catch (error) {\r\n            dispatch(toggleActions.showNotification({\r\n                status: 'error',\r\n                title: 'Error!',\r\n                message: 'Fetching cart data failed'\r\n            }))\r\n        }\r\n\r\n    }\r\n}"],"mappings":"gQAAA,OAASA,WAAT,KAA4B,cAA5B,CACA,OAASC,aAAT,KAA8B,YAA9B,CAEA,MAAO,IAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,IAAD,CAAU,CAElC,iGAAO,kBAAOC,QAAP,wIAEHA,QAAQ,CAACH,aAAa,CAACI,gBAAd,CAA+B,CACpCC,MAAM,CAAE,SAD4B,CAEpCC,KAAK,CAAE,YAF6B,CAGpCC,OAAO,CAAE,sBAH2B,CAA/B,CAAD,CAAR,CAKMC,WAPH,6FAOiB,wKAEOC,MAAK,CAAC,wEAAD,CACxB,CACIC,MAAM,CAAE,KADZ,CAEI;AACAC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,KAAK,CAAEZ,IAAI,CAACY,KADK,CAEjBC,aAAa,CAAEb,IAAI,CAACa,aAFH,CAAf,CAHV,CADwB,CAFZ,QAEVC,QAFU,kBAYXA,QAAQ,CAACC,EAZE,8BAaN,IAAIC,MAAJ,CAAU,2BAAV,CAbM,uDAPjB,kBAOGV,YAPH,oFAwBOA,YAAW,EAxBlB,QAyBCL,QAAQ,CAACH,aAAa,CAACI,gBAAd,CAA+B,CACpCC,MAAM,CAAE,SAD4B,CAEpCC,KAAK,CAAE,UAF6B,CAGpCC,OAAO,CAAE,8BAH2B,CAA/B,CAAD,CAAR,CAzBD,mFAgCCJ,QAAQ,CAACH,aAAa,CAACI,gBAAd,CAA+B,CACpCC,MAAM,CAAE,OAD4B,CAEpCC,KAAK,CAAE,QAF6B,CAGpCC,OAAO,CAAE,0BAH2B,CAA/B,CAAD,CAAR,CAhCD,sEAAP,+DAwCH,CA1CM,CA4CP,MAAO,IAAMY,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC/B,kGAAO,kBAAOhB,QAAP,+IACGiB,SADH,6FACe,mLACSX,MAAK,CAAC,wEAAD,CADd,QACRO,QADQ,mBAGTA,QAAQ,CAACC,EAHA,+BAIJ,IAAIC,MAAJ,CAAU,4BAAV,CAJI,+BAMKF,SAAQ,CAACK,IAAT,EANL,QAMRC,IANQ,iDAQPA,IARO,0DADf,kBACGF,UADH,oFAYwBA,UAAS,EAZjC,QAYOG,QAZP,gBAaC;AACApB,QAAQ,CAACJ,WAAW,CAACyB,WAAZ,CAAwB,CAC7BV,KAAK,CAAES,QAAQ,CAACT,KAAT,EAAkB,EADI,CAE7BC,aAAa,CAAEQ,QAAQ,CAACR,aAFK,CAAxB,CAAD,CAAR,CAdD,mFAoBCZ,QAAQ,CAACH,aAAa,CAACI,gBAAd,CAA+B,CACpCC,MAAM,CAAE,OAD4B,CAEpCC,KAAK,CAAE,QAF6B,CAGpCC,OAAO,CAAE,2BAH2B,CAA/B,CAAD,CAAR,CApBD,sEAAP,iEA4BH,CA7BM"},"metadata":{},"sourceType":"module"}